- restConfiguration:
    component: platform-http
    host: 127.0.0.1
    port: "8080"
    contextPath: /api-doc
    bindingMode: json
- rest:
    id: rest-26c9
    disabled: false
    path: /myService
    get:
      - id: get-5d4a
        to: direct:direct-get
        bindingMode: json
        clientRequestValidation: false
- beans:
    - name: OracleDatabase
      type: "#class:org.apache.commons.dbcp2.BasicDataSource"
      properties:
        username: TWOAPPS
        password: XJSSPSMB4JNN9
        url: jdbc:oracle:thin:@twoone-dev.maxapex.net:1521/XEPDB1
        driverClassName: oracle.jdbc.driver.OracleDriver
- route:
    id: route-1860
    nodePrefixId: route-578
    from:
      id: from-5fa8
      uri: timer
      parameters:
        timerName: Hello World
        delay: "10000"
        repeatCount: "10"
      steps:
        - setBody:
            id: setBody-c665
            expression:
              constant:
                id: constant-ca32
                expression: Hello
        - log:
            id: log-4af4
            message: ${body}
            loggingLevel: INFO
- route:
    id: direct-get
    nodePrefixId: node-573
    from:
      id: from-ec17
      uri: direct
      variableReceive: global:undefined
      parameters:
        name: direct-get
      steps:
        - doTry:
            id: doTry-3052
            doCatch:
              - id: doCatch-ac92
                exception:
                  - java.lang.Exception
                steps:
                  - log:
                      id: log-4ff5
                      message: "\"ERRO CAPTURADO: ${exception.message}\""
            steps:
              - marshal:
                  id: marshal-3328
                  json:
                    id: json-4d91
              - to:
                  id: to-6633
                  uri: json-validator
                  parameters:
                    resourceUri: file:/karavan/code/meu-schema.json
              - unmarshal:
                  id: unmarshal-cf4d
                  json:
                    id: json-cbe7
              - script:
                  id: script-55be
                  expression:
                    groovy:
                      id: groovy-c3b6
                      expression: "\r\ndef contact = body;\r\nlog.info(\"Conteúdo do contact: ${contact}\")\r\n// Adiciona novos campos\r\n//contact['username'] = 'oscerd'\r\n//contact['city'] = 'Rome'\r\n\r\nlog.info(\"Conteúdo do contact: ${contact}\")\r\n\r\n\r\n\r\n\r\n// Define o mapa modificado como o novo corpo\r\nbody = contact\r\n\r\n\r\nlog.info(\"Conteúdo do contact: ${body}\")"
              - to:
                  id: to-ba62
                  uri: sql
                  parameters:
                    query: >-
                      INSERT INTO accounts (username,city) VALUES
                      (:#username,:#city)
                    dataSource: "#bean:OracleDatabase"
              - script:
                  id: script-1ee0
                  expression:
                    groovy:
                      id: groovy-3c96
                      expression: "// Script 'main'\r\n            log.info(\"MAIN: Processando invoice...\")\r\n            // Converte o JSON recebido para um Mapa Groovy\r\n            def invoice = body;\r\n            log.info(\"Conteúdo do invoice2: ${invoice}\")\r\n            \r\n            // Adiciona novos campos\r\n            invoice['abner'] = 'INV-12345'\r\n            invoice['status'] = 'PROCESSED'\r\n            \r\n            // Define o mapa modificado como o novo corpo\r\n            body = invoice"
