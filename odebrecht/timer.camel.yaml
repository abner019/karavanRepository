- restConfiguration:
    component: platform-http
    host: 127.0.0.1
    port: "8080"
    contextPath: /api-doc
    bindingMode: json
- rest:
    id: rest-26c9
    disabled: false
    path: /myService
    get:
      - id: get-5d4a
        to: direct:direct-get
        bindingMode: json
        clientRequestValidation: false
- route:
    id: route-1860
    nodePrefixId: route-578
    from:
      id: from-5fa8
      uri: timer
      parameters:
        timerName: Hello World
        delay: "10000"
        repeatCount: "10"
      steps:
        - setBody:
            id: setBody-c665
            expression:
              constant:
                id: constant-ca32
                expression: Hello
        - log:
            id: log-4af4
            message: ${body}
            loggingLevel: INFO
- route:
    id: direct-get
    nodePrefixId: node-573
    from:
      id: from-ec17
      uri: direct
      variableReceive: global:undefined
      parameters:
        name: direct-get
      steps:
        - doTry:
            id: doTry-3052
            doCatch:
              - id: doCatch-d714
                exception:
                  - java.lang.Exception
                steps:
                  - log:
                      id: log-d098
                      message: "ERRO CAPTURADO: ${exception.message}"
            steps:
              - marshal:
                  id: marshal-3328
                  json:
                    id: json-4d91
              - to:
                  id: to-6633
                  uri: json-validator
                  parameters:
                    resourceUri: file:/karavan/code/meu-schema.json
              - script:
                  id: script-55be
                  expression:
                    groovy:
                      id: groovy-c3b6
                      expression: "\r\ndef contact = body;\r\nlog.info(\"Conteúdo do contact: ${contact}\")\r\n// Adiciona novos campos\r\ncontact['username'] = 'oscerd'\r\ncontact['city'] = 'Rome'\r\n\r\nlog.info(\"Conteúdo do contact: ${contact}\")\r\n\r\n\r\n\r\n\r\n// Define o mapa modificado como o novo corpo\r\nbody = contact\r\n\r\n\r\nlog.info(\"Conteúdo do contact: ${body}\")"
              - to:
                  id: to-817d
                  uri: kamelet:oracle-database-sink
                  parameters:
                    serverName: twoone-dev.maxapex.net
                    databaseName: XEPDB1
                    query: >-
                      INSERT INTO accounts (username,city) VALUES
                      (:#username,:#city)
                    password: "{{twoapps.datasource.password}}"
                    serverPort: 1521
                    username: "{{twoapps.datasource.username}}"
              - marshal:
                  id: marshal-b54a
                  json:
                    id: json-96ea
              - script:
                  id: script-1ee0
                  expression:
                    groovy:
                      id: groovy-3c96
                      expression: "// Script 'main'\r\n            log.info(\"MAIN: Processando invoice...\")\r\n            // Converte o JSON recebido para um Mapa Groovy\r\n            def invoice = body;\r\n            log.info(\"Conteúdo do invoice2: ${invoice}\")\r\n            \r\n            // Adiciona novos campos\r\n            invoice['abner'] = 'INV-12345'\r\n            invoice['status'] = 'PROCESSED'\r\n            \r\n            // Define o mapa modificado como o novo corpo\r\n            body = invoice"
